当前端需要将**测试版**部署成**正式版**时，需要将**原正式版**打包备份

**shell中命令如下：**
``` bash
# 进入指定目录
cd /home/apps
# 1.将测试目录xj2拷贝到临时xjTemp目录中
cp -r xj2 xjTemp
# 2.将现有的正式版目录xj重命名为即将备份的名称xj_bak20250627
mv xj/ xj_bak20250627
# 3.将临时xjTemp目录重命名正式的目录xj
mv xjTemp/ xj
# 4.进入xj_bak20250627目录删除node_modules文件夹
cd xj_bak20250627
rm -rf node_modules
cd ..
# 5.将xj_bak20250627目录打包.tar.gz
tar -zcvf xj_bak20250627.tar.gz xj_bak20250627
# 6.将打包的xj_bak20250627文件夹删除
rm -rf xj_bak20250627
```

----

以上shell中一步步操作繁琐，下面使用.sh命令部署
``` bash
# 进入指定目录
cd /home/apps
# 运行.sh文件
sh newtest2xj.sh
```

----

`newtest2xj.sh`文件
``` bash
#!/bin/bash

NowTime=$(date +%Y%m%d%H%M%S)
# 系统正式目录名
FileName="xj"
# 系统测试目录名
TestFileName="xj2"
# 临时目录名
TempName="xjTemp"
# 正式目录备份文件名
BakFileName="xj_bak${NowTime}"
BakTarFileName="xj_bak${NowTime}.tar.gz"
# 删除
DELETE_NAME="node_modules"

# 检查是否找到匹配的文件夹
if [ -d "$TestFileName" ]; then
  echo "start..."
	# 拷贝测试系统文件夹到临时文件夹中
	cp -r ${TestFileName} ${TempName}

	# 正式目录备份
	mv "${FileName}/" ${BakFileName}
	mv "${TempName}/" ${FileName}
	# 删除备份中的node_modules
	rm -rf "/home/apps/${BakFileName}/${DELETE_NAME}"
	# 打包备份
	tar -zcvf ${BakTarFileName} ${BakFileName}
	# 删除备份文件夹，只保留压缩包
	rm -rf ${BakFileName}

	echo -e "\033[1;32m>>>Succeed<<<\033[0m"
else
  echo -e "\033[1;31m---NO--${TestFileName} end...\033[0m"
fi

```
